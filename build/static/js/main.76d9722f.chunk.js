(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{20:function(e,n,t){},40:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var c=t(1),s=t(15),r=t.n(s),o=(t(20),t(3)),a=t(0),i=function(e){var n=e.filterName,t=e.setFilter;return Object(a.jsxs)("div",{className:"filterContainer",children:["Filter by name: ",Object(a.jsx)("input",{value:n,onChange:function(e){t(e.target.value)}})]})},u=t(6),l=t(4),j=t.n(l),b="/api/persons",d=function(){return j.a.get(b).then((function(e){return e.data}))},m=function(e){return j.a.post(b,e)},f=function(e){return j.a.delete("".concat(b,"/").concat(e))},h=function(e,n){return j.a.put("".concat(b,"/").concat(e),n).then((function(e){return e.data}))},O=function(e){var n=e.persons,t=e.setPersons,c=e.newName,s=e.setNewName,r=e.newPhoneNumber,o=e.setNewPhoneNumber,i=e.setNotificationMessage,l=e.setErrorMessage;return Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault();var a={name:c,number:r};if(n.some((function(e){return e.name===c}))){if(window.confirm("".concat(c," is already in the phonebook, replace the old number with a new one?"))){var j=n.find((function(e){return e.name===c})),b=Object(u.a)(Object(u.a)({},j),{},{number:r});return void h(j.id,b).then((function(e){t(n.map((function(n){return n.id!==j.id?n:e})))})).catch((function(e){l("".concat(b.name," was already deleted from the server!")),setTimeout((function(){l(null)}),5e3)}))}}else s(e.target.value),m(a).then((function(e){i("Added ".concat(a.name)),setTimeout((function(){i(null)}),5e3),t(n.concat(e.data)),s(""),o("")})).catch((function(e){console.log(e.response),l("".concat(e.response)),setTimeout((function(){l(null)}),5e3)}))},children:[Object(a.jsxs)("div",{className:"personInputForm",children:["Name: ",Object(a.jsx)("input",{value:c||"",onChange:function(e){s(e.target.value)}}),Object(a.jsx)("br",{}),"Number: ",Object(a.jsx)("input",{value:r||"",onChange:function(e){o(e.target.value)}})]}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{className:"addPersonBtn",type:"submit",children:"Add"})})]})},p=function(e){var n=e.persons,t=e.setPersons,c=e.filterName;return Object(a.jsx)("div",{className:"personListContainer",children:Object(a.jsx)("ul",{children:n.filter((function(e){return e.name.toLowerCase().includes(c.toLowerCase())||""===c})).map((function(e){return Object(a.jsxs)("div",{className:"personRow",children:[Object(a.jsx)("p",{children:Object(a.jsx)("strong",{children:e.name})}),Object(a.jsx)("p",{className:"personNumber",children:e.number}),Object(a.jsx)("button",{className:"deleteBtn",type:"button",onClick:function(){return c=e.id,s=e.name,void f(c).then((function(){window.confirm("Delete ".concat(s,"?"))&&t(n.filter((function(e){return e.id!==c})))}));var c,s},children:"Delete"})]},e.id)}))})})},N=function(e){var n=e.message;return null===n?null:Object(a.jsx)("div",{className:"notification",children:n})},v=function(e){var n=e.message;return null===n?null:Object(a.jsx)("div",{className:"error",children:n})},x=(t(40),function(){var e=Object(c.useState)([]),n=Object(o.a)(e,2),t=n[0],s=n[1],r=Object(c.useState)(""),u=Object(o.a)(r,2),l=u[0],j=u[1],b=Object(c.useState)(""),m=Object(o.a)(b,2),f=m[0],h=m[1],x=Object(c.useState)(""),w=Object(o.a)(x,2),g=w[0],P=w[1],C=Object(c.useState)(null),k=Object(o.a)(C,2),S=k[0],y=k[1],E=Object(c.useState)(null),F=Object(o.a)(E,2),M=F[0],T=F[1];return Object(c.useEffect)((function(){console.log("effect"),d().then((function(e){s(e)}))}),[]),Object(a.jsxs)("div",{className:"mainContainer",children:[Object(a.jsx)(N,{message:S}),Object(a.jsx)(v,{message:M}),Object(a.jsx)("p",{className:"phonebookTitle",children:"Phonebook"}),Object(a.jsx)(i,{filterName:g,setFilter:P}),Object(a.jsx)("h2",{children:"Numbers"}),Object(a.jsx)(p,{persons:t,setPersons:s,filterName:g}),Object(a.jsx)("h2",{children:"Add new contact"}),Object(a.jsx)(O,{persons:t,setPersons:s,newName:l,setNewName:j,newPhoneNumber:f,setNewPhoneNumber:h,setNotificationMessage:y,setErrorMessage:T})]})});r.a.render(Object(a.jsx)(x,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.76d9722f.chunk.js.map