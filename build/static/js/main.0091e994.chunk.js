(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{20:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var r=n(1),s=n(15),c=n.n(s),a=(n(20),n(3)),o=n(0),i=function(e){var t=e.filterName,n=e.setFilter;return Object(o.jsxs)("div",{className:"filterContainer",children:["Filter by name: ",Object(o.jsx)("input",{value:t,onChange:function(e){n(e.target.value)}})]})},u=n(6),l=n(4),j=n.n(l),b="/api/persons",d=function(){return j.a.get(b).then((function(e){return e.data}))},m=function(e){return j.a.post(b,e)},f=function(e){return j.a.delete("".concat(b,"/").concat(e))},h=function(e,t){return j.a.put("".concat(b,"/").concat(e),t).then((function(e){return e.data}))},O=function(e){var t=e.persons,n=e.setPersons,r=e.newName,s=e.setNewName,c=e.newPhoneNumber,a=e.setNewPhoneNumber,i=e.setNotificationMessage,l=e.setErrorMessage;return Object(o.jsxs)("form",{onSubmit:function(e){e.preventDefault();var o={name:r,number:c};if(t.some((function(e){return e.name===r}))){if(window.confirm("".concat(r," is already in the phonebook, replace the old number with a new one?"))){var j=t.find((function(e){return e.name===r})),b=Object(u.a)(Object(u.a)({},j),{},{number:c});return void h(j.id,b).then((function(e){n(t.map((function(t){return t.id!==j.id?t:e})))})).catch((function(e){l("".concat(b.name," was already deleted from the server!")),setTimeout((function(){l(null)}),5e3)}))}}else s(e.target.value),m(o).then((function(e){i("Added ".concat(o.name)),setTimeout((function(){i(null)}),5e3),n(t.concat(e.data)),s(""),a("")})).catch((function(e){e.response.data.error.includes("name")&&l("Name is too short, required length is at least 3 characters!"),e.response.data.error.includes("number")&&l("Number is too short, required length is at least 8 characters!"),setTimeout((function(){l(null)}),5e3)}))},children:[Object(o.jsxs)("div",{className:"personInputForm",children:["Name: ",Object(o.jsx)("input",{value:r||"",onChange:function(e){s(e.target.value)}}),Object(o.jsx)("br",{}),"Number: ",Object(o.jsx)("input",{value:c||"",onChange:function(e){a(e.target.value)}})]}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{className:"addPersonBtn",type:"submit",children:"Add"})})]})},p=function(e){var t=e.persons,n=e.setPersons,r=e.filterName;return Object(o.jsx)("div",{className:"personListContainer",children:Object(o.jsx)("ul",{children:t.filter((function(e){return e.name.toLowerCase().includes(r.toLowerCase())||""===r})).map((function(e){return Object(o.jsxs)("div",{className:"personRow",children:[Object(o.jsx)("p",{children:Object(o.jsx)("strong",{children:e.name})}),Object(o.jsx)("p",{className:"personNumber",children:e.number}),Object(o.jsx)("button",{className:"deleteBtn",type:"button",onClick:function(){return r=e.id,s=e.name,void f(r).then((function(){window.confirm("Delete ".concat(s,"?"))&&n(t.filter((function(e){return e.id!==r})))}));var r,s},children:"Delete"})]},e.id)}))})})},N=function(e){var t=e.message;return null===t?null:Object(o.jsx)("div",{className:"notification",children:t})},v=function(e){var t=e.message;return null===t?null:Object(o.jsx)("div",{className:"error",children:t})},x=(n(40),function(){var e=Object(r.useState)([]),t=Object(a.a)(e,2),n=t[0],s=t[1],c=Object(r.useState)(""),u=Object(a.a)(c,2),l=u[0],j=u[1],b=Object(r.useState)(""),m=Object(a.a)(b,2),f=m[0],h=m[1],x=Object(r.useState)(""),g=Object(a.a)(x,2),w=g[0],P=g[1],C=Object(r.useState)(null),k=Object(a.a)(C,2),S=k[0],y=k[1],E=Object(r.useState)(null),F=Object(a.a)(E,2),M=F[0],T=F[1];return Object(r.useEffect)((function(){console.log("effect"),d().then((function(e){s(e)}))}),[]),Object(o.jsxs)("div",{className:"mainContainer",children:[Object(o.jsx)(N,{message:S}),Object(o.jsx)(v,{message:M}),Object(o.jsx)("p",{className:"phonebookTitle",children:"Phonebook"}),Object(o.jsx)(i,{filterName:w,setFilter:P}),Object(o.jsx)("h2",{children:"Numbers"}),Object(o.jsx)(p,{persons:n,setPersons:s,filterName:w}),Object(o.jsx)("h2",{children:"Add new contact"}),Object(o.jsx)(O,{persons:n,setPersons:s,newName:l,setNewName:j,newPhoneNumber:f,setNewPhoneNumber:h,setNotificationMessage:y,setErrorMessage:T})]})});c.a.render(Object(o.jsx)(x,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.0091e994.chunk.js.map